Домашнее задание №7

Срок выполнения - 16 декабря 2017 (РК2)

Тема: менеджер задач в телеграм боте

----

В этой задаче мы реализуем простого телеграм-бота по управлению задачами. Немого парсинга, немного моделирования данных, научитесь размещать ботов в телеграме.

Здание ИМХО простое, сильно голову ломать не придётся!

Управление происходит через текстовый интерфейс:
* `/tasks`
* `/new XXX YYY ZZZ` - создаёт новую задачу
* `/assign_$ID` - делаеть пользователя исполнителем задачи
* `/unassign_$ID` - снимает задачу с текущего исполнителя
* `/resolve_$ID` - выполняет задачу, удаляет её из списка
* `/my` - показывает задачи, которые назначены на меня
* `/own` - показывает задачи которые были созданы мной
Подробности форматирования смотрите в тестах.

Мы используем чуть-чуть подправленную библиотеку для работы с телеграм-ботом, чтобы можно было написать тесты, притворившись сервером телеграма. Она лежит у нас в vendors в папке с заданием. Тесты запускаются с ней нормально через `go test -v`.

После прохождения тестов задачу надо будет показать в реальном телеграме, для этого у вас есть 2 варианта:
1. `ngrok` (https://ngrok.com/) - пробрасывает порт к вам (после авторизации там будет команда для созранения токена в конфиге). В этом случае лучше согласовать с преподавателями время проверки, чтобы вы включили у себя. Хорошо чтобы показать что-то на демо, для прода я бы не рискнул это использовать. Попроще.
2. `heroku` (https://devcenter.heroku.com/articles/getting-started-with-go) - они предоставляют бесплатный хостинг для го с поддоменом и сертификатом, который можно подключить к телеграму. бесплатная версия должна спать 8 часов в сутки, но для тестирования хватает. Посложнее.
Для создания бота в телеграме стучитесь `@BotFather`

Если вы выберете `heroku` - он не дружит с одновременным нахождением в гитлабе. Используйте отдельную папку пожалуйста, иначе я не смогу посмотреть ваш код.

Можно использовать базу если хотите потренироваться (у `heroku` бесплатный postgres), в этом случае вам надо будет предоставить дамп таблиц вместе с вашим кодом, или же вкрутить создание таблиц в ваш код ( с проверкой что их нет).

Или же можно обойтись обычным слайсом и не заморачиваться с базой.

Задание можно сдать частично - только тесты, без реального бота в телеграме - половина баллов, полная оценка за показ настоящего бота.

В помощь:
* базовый телеграм-бот - https://gitlab.com/rvasily/golang-2017-2/tree/master/4/5_bot - расказывалось в 4-й лекции
* остановка сервера - https://gist.github.com/rvasily/be725f0d1125ceb45fb455082d852f43 - понадобится если вы хотите написать сервер который можно туда-сюда запускать-останавливать для разных тестов. Подсказка - там надо будет использовать select. Остановка через контект обсуждалась в https://gitlab.com/rvasily/golang-2017-2/blob/master/2/1_async/context_cancel.go. Но можете забить - текст пока один.